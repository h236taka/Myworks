        -:    0:Source:rpg.c
        -:    1:#include <stdio.h>
        -:    2:#include <string.h>
        -:    3:#include <unistd.h>
        -:    4:#include <stdlib.h>
        -:    5:#include <time.h>
        -:    6:#include <sys/stat.h>
        -:    7:#include <conio.h>
        -:    8:#include <wchar.h>
        -:    9:#include "rpg.h"
        -:   10:
        -:   11://プレイ時間に関するグローバルな型・変数
        -:   12:time_t start_time, end_time;
        -:   13:int play_time;
        -:   14:
        1:   15:int main(void){
        -:   16:  int load, input;   //input:プレイヤーの入力
        -:   17:  Player player;
        -:   18:  Player player2;
        -:   19:  Player player3;
        1:   20:  Items items = {0};
        -:   21:
        1:   22:  Area area = {0};
        -:   23:
        -:   24:
        -:   25:  //boss_count = １ならばボス扱い
        -:   26:  //boss_count = 2ならば強制戦闘
        -:   27:  //enemy_skillが0以外なら敵はスキルを使用
        -:   28:  //enemy_id = 1,2,3,4 通常攻撃のみ
        -:   29:  //enemy_id = 100 POISON
        -:   30:  //enemy_id = 101 回復:LV1
        -:   31:
        -:   32:  //enemy_id = 0 通常攻撃のみ
        -:   33:  // name hp, maxhp, mp, maxmp, atk, magic, str, agi, luk, lv, exp, gold, badstatus, physical_attack, gun_attack, fire, ice, elec, wave, almighty, death, expel, poison, palyze, charm, close, stone, panic, sleep, curse, boss_count, enemy_id
        1:   34:  Enemy slime = {"スライム", 10, 10, 0, 0, 2, 1, 1, 1, 1, 1, 5, 15, 0, 150, 100, 200, 100, 100, 100, 100, 100, 200, 100, 100, 100, 100, 100, 100, 100, 100, 0, 1};
        1:   35:  Enemy kobalt = {"コボルト", 20, 20, 0, 0, 2, 1, 2, 1, 1, 2, 10, 20, 0, 80, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 0, 2};
        1:   36:  Enemy goblin = {"ゴブリン", 65, 65, 0, 0, 3, 1, 2, 2, 1, 3, 25, 30, 0, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 1, 3}; //boss
        1:   37:  Enemy zombiedog = {"ゾンビドッグ", 30, 30, 0, 0, 2, 1, 3, 5, 1, 3, 8, 15, 0, 100, 100, 200, 200, 100, 100, 100, -1, 200, 100, 100, 100, 100, 100, 100, 100, 100, 0, 4};
        1:   38:  Enemy ghoul = {"グール", 30, 30, 10, 10, 1, 1, 1, 1, 1, 2, 10, 20, 0, 100, 100, 150, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 0, 5};
        1:   39:  Enemy zombie = {"ゾンビ", 55, 55, 12, 12, 2, 1, 3, 2, 1, 2, 6, 30, 0, 100, 100, 200, 100, 200, 100, 100, -1, 200, 100, 100, 100, 100, 100, 100, 100, -1, 0, 6};
        1:   40:  Enemy goblin_normal = {"ゴブリン", 70, 70, 0, 0, 3, 1, 3, 2, 1, 3, 15, 30, 0, 100, 150, 100, 100, 100, 200, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 0, 7};  //通常敵
        1:   41:  Enemy onmoraki = {"オンモラキ", 50, 50, 15, 15, 2, 3, 2, 3, 2, 4, 12, 25, 0, 80, 100, -1, 200, 100, 100, 100, -1, 100, 100, 100, 100, 100, 100, 100, 100, 100, 0, 8};
        -:   42:  //Enemy pixie = {"ピクシー", 55, 55, 15, 15, 1, 3, 1, 5, 5, 3, 25, 40, 0, 100, 150, 100, 100, 50, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 0, 101};
        -:   43:  //Enemy angel = {"エンジェル", 108, 108, 30, 30, 2, 5, 3, 5, 2, 4, 50, 100, 0, 100, 100, 100, 100, 150, 100, 100, 200, 100, 100, 100, 100, 100, 100, 100, 100, 100, 1, 101};
        -:   44:
        1:   45:  srand((unsigned int)time(NULL));
        -:   46:
        -:   47:  P_skill player_skill;
        -:   48:  P_skill player_skill2;
        -:   49:  P_skill player_skill3;
        -:   50:
        -:   51:  do{
        1:   52:    printf("MAIN MENU\n");
        1:   53:    printf("1:<<<LOAD GAME>>>\n");
        1:   54:    printf("2:<<<NEW  GAME>>>\n");
        1:   55:    printf("1か2を入力してください(ゲームを起動しない場合はcを入力してください)\n");
        1:   56:    input = _getch();
        1:   57:    if ( input == '1' ){
        1:   58:      load = 1;
        1:   59:      save_load(&player, &player2, &player3, &player_skill, &player_skill2, &player_skill3, &items, load);
        -:   60:    }
    #####:   61:    else if ( input == '2' ){
        -:   62:      //new gameでは、player.stage_clearは0
        -:   63:      //prologue();
    #####:   64:      start_time = time(NULL);
    #####:   65:      printf("start_time:%d\n", start_time);
    #####:   66:      game_start(&player, &player2, &player3);
    #####:   67:      load = 0;
    #####:   68:      game_story1(&player, &player2, &player3, &player_skill, &player_skill2, &player_skill3, &items, &area, &slime, &kobalt, &goblin);
    #####:   69:      save_load(&player, &player2, &player3, &player_skill, &player_skill2, &player_skill3, &items, load);
        -:   70:    }
    #####:   71:    else if ( input == '' ){
    #####:   72:      printf("強制終了\n");
    #####:   73:      exit(EXIT_FAILURE);
        -:   74:    }
    #####:   75:    else if ( input == 'c' ){
    #####:   76:      printf("ゲームを終了します・・・\n");
    #####:   77:      exit(EXIT_SUCCESS);
        -:   78:    }
       1*:   79:  }while ( input != '1' && input != '2' );
        -:   80:
        -:   81:  //printf("%d\n", player.stage_clear);
        1:   82:  load = 0;
        1:   83:  if ( player.stage_clear == 1 || player.stage_clear == 1.1 ){
        -:   84:    //start_time = time(NULL);
        1:   85:    game_story2(&player, &player2, &player3, &player_skill, &player_skill2, &player_skill3, &items,&area,&zombie,&slime,&goblin_normal,&kobalt,&zombiedog,&onmoraki);//図書館ステージ
    #####:   86:    save_load(&player, &player2, &player3, &player_skill, &player_skill2, &player_skill3, &items, load);
        -:   87:  }
    #####:   88:  else if ( player.stage_clear == 2 ){
    #####:   89:    printf("Wait・・・\n");
        -:   90:  }
        -:   91:
    #####:   92:  return 0;
        -:   93:}
